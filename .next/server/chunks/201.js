exports.id=201,exports.ids=[201],exports.modules={3902:(a,b,c)=>{Promise.resolve().then(c.t.bind(c,54160,23)),Promise.resolve().then(c.t.bind(c,31603,23)),Promise.resolve().then(c.t.bind(c,68495,23)),Promise.resolve().then(c.t.bind(c,75170,23)),Promise.resolve().then(c.t.bind(c,77526,23)),Promise.resolve().then(c.t.bind(c,78922,23)),Promise.resolve().then(c.t.bind(c,29234,23)),Promise.resolve().then(c.t.bind(c,12263,23)),Promise.resolve().then(c.bind(c,82146))},16953:(a,b,c)=>{"use strict";c.r(b),c.d(b,{default:()=>h,metadata:()=>f,viewport:()=>g});var d=c(75338);c(82704);var e=c(81765);let f={title:"CTT - Cuba Try Test",description:"Cuba Try Test - UAT Management"},g={width:"device-width",initialScale:1};function h({children:a}){return(0,d.jsxs)("html",{lang:"en",children:[(0,d.jsxs)("head",{children:[(0,d.jsx)("link",{rel:"preconnect",href:"https://fonts.googleapis.com"}),(0,d.jsx)("link",{rel:"preconnect",href:"https://fonts.gstatic.com",crossOrigin:""}),(0,d.jsx)("link",{href:"https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&display=swap",rel:"stylesheet"})]}),(0,d.jsx)("body",{children:(0,d.jsx)(e.default,{children:a})})]})}},18334:(a,b,c)=>{"use strict";c.d(b,{Xh:()=>f,bx:()=>e,nW:()=>d});var d=function(a){return a.PENDING="Pending",a.IN_PROGRESS="In Progress",a.PASSED="Passed",a.FAILED="Failed",a.BLOCKED="Blocked",a.DEPLOYED="Deployed",a}({}),e=function(a){return a.LOW="Low",a.MEDIUM="Medium",a.HIGH="High",a.CRITICAL="Critical",a}({}),f=function(a){return a.ADMIN="Admin",a.STAKEHOLDER="Stakeholder",a}({})},39542:(a,b,c)=>{Promise.resolve().then(c.bind(c,97923))},41998:(a,b,c)=>{"use strict";c.d(b,{_z:()=>e,o1:()=>g,uY:()=>h,xW:()=>f});var d=c(18334);let e=[{code:"TH",name:"Thailand",color:"bg-pink-100 text-pink-700"},{code:"SG",name:"Singapore",color:"bg-cyan-100 text-cyan-700"},{code:"VN",name:"Vietnam",color:"bg-yellow-100 text-yellow-700"},{code:"MY",name:"Malaysia",color:"bg-blue-100 text-blue-700"},{code:"TW",name:"Taiwan",color:"bg-emerald-100 text-emerald-700"},{code:"HK",name:"Hong Kong",color:"bg-red-100 text-red-700"}],f=["Ordering","Pricing","Reporting","Integration","Account","Promotions","Returns"],g=[{id:"u1",name:"Sarah Chen",email:"sarah.c@company.com",role:d.Xh.STAKEHOLDER,countryCode:"SG",avatarUrl:"https://picsum.photos/100/100"},{id:"u2",name:"Alex Miller",email:"alex.m@company.com",role:d.Xh.ADMIN,countryCode:"SG",avatarUrl:"https://picsum.photos/101/101"}];d.nW.PENDING,d.bx.HIGH,d.nW.IN_PROGRESS,d.bx.MEDIUM,d.nW.FAILED,d.bx.CRITICAL,d.nW.DEPLOYED,d.bx.LOW,d.nW.BLOCKED,d.bx.HIGH;let h=[{id:"n1",userId:"u2",type:"ALERT",message:'Task "SAP Integration" marked as FAILED in Thailand.',time:"10 mins ago",isRead:!1,relatedTaskId:"t3"},{id:"n2",userId:"u2",type:"SUCCESS",message:'Sarah Chen completed "User Profile Update".',time:"1 hour ago",isRead:!1,relatedTaskId:"t4"},{id:"n3",userId:"u2",type:"MENTION",message:'New comment from Alex: "Please check font support..."',time:"2 hours ago",isRead:!0,relatedTaskId:"t2"},{id:"n4",userId:"u1",type:"INFO",message:'New task assigned: "Verify Order Creation".',time:"3 hours ago",isRead:!1,relatedTaskId:"t1"},{id:"n5",userId:"u1",type:"ALERT",message:'Task "Check PDF Invoice" is due tomorrow.',time:"5 hours ago",isRead:!0,relatedTaskId:"t2"}]},43933:(a,b,c)=>{"use strict";c.d(b,{default:()=>ab});var d=c(21124),e=c(42378),f=c(38301),g=c(57461),h=c(57864),i=c(18334),j=c(41998);let k=({type:a,value:b,className:c=""})=>"status"===a?(0,d.jsx)("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium border ${(a=>{switch(a){case i.nW.PENDING:return"bg-slate-100 text-slate-600 border-slate-200";case i.nW.IN_PROGRESS:return"bg-blue-50 text-blue-700 border-blue-100";case i.nW.PASSED:return"bg-emerald-50 text-emerald-700 border-emerald-100";case i.nW.FAILED:return"bg-rose-50 text-rose-700 border-rose-100";case i.nW.BLOCKED:return"bg-amber-50 text-amber-700 border-amber-100";default:return"bg-gray-100 text-gray-600"}})(b)} ${c}`,children:b}):"priority"===a?(0,d.jsxs)("span",{className:`text-xs flex items-center gap-1 ${(a=>{switch(a){case i.bx.LOW:return"text-slate-500";case i.bx.MEDIUM:return"text-blue-600";case i.bx.HIGH:return"text-amber-600 font-medium";case i.bx.CRITICAL:return"text-rose-600 font-bold";default:return"text-slate-500"}})(b)} ${c}`,children:[b===i.bx.CRITICAL&&(0,d.jsx)("span",{className:"w-1.5 h-1.5 rounded-full bg-rose-500 animate-pulse"}),b===i.bx.HIGH&&(0,d.jsx)("span",{className:"w-1.5 h-1.5 rounded-full bg-amber-500"}),b]}):"module"===a?(0,d.jsx)("span",{className:`inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-indigo-50 text-indigo-700 border border-indigo-100 ${c}`,children:b}):(0,d.jsx)("span",{className:`inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-slate-100 text-slate-600 ${c}`,children:b});var l=c(18310),m=c(75219),n=c(15303),o=c(44688),p=c(75535),q=c(88285);let r=({tasks:a,onSelectTask:b,currentUserCountry:c})=>{let[e,g]=(0,f.useState)("All"),h=a.filter(a=>a.countryCode===c),r="All"===e?h:h.filter(a=>a.status===e),s=h.length,t=h.filter(a=>a.status===i.nW.PENDING||a.status===i.nW.IN_PROGRESS).length,u=h.filter(a=>a.status===i.nW.PASSED).length,v=s>0?Math.round(u/s*100):0,w=Math.round(.2*h.reduce((a,b)=>a+b.steps.reduce((a,b)=>a+b.comments.length,0),0)),x=h.filter(a=>a.status===i.nW.BLOCKED),y=j.uY.filter(a=>"MENTION"===a.type||"ALERT"===a.type).slice(0,5),z=a=>a.assignee?.avatarUrl;return(0,d.jsxs)("div",{className:"space-y-6",children:[x.length>0&&(0,d.jsxs)("div",{className:"bg-amber-50 border border-amber-200 rounded-xl p-4 flex items-start gap-3 animate-fade-in shadow-sm",children:[(0,d.jsx)(l.A,{className:"text-amber-600 mt-0.5 flex-shrink-0",size:24}),(0,d.jsxs)("div",{children:[(0,d.jsxs)("h3",{className:"font-bold text-sm text-amber-900",children:["Attention Needed: Testing Halted for ",x.length," Tasks"]}),(0,d.jsx)("p",{className:"text-amber-800 text-sm mt-1 mb-2",children:"The following tasks are currently blocked. Please focus on other scenarios."}),(0,d.jsx)("ul",{className:"list-disc list-inside text-xs text-amber-700 space-y-1",children:x.map(a=>(0,d.jsxs)("li",{children:[(0,d.jsxs)("span",{className:"font-semibold",children:[a.featureModule,":"]})," ",a.title," ",a.blockReason?`(${a.blockReason})`:""]},a.id))})]})]}),(0,d.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-8",children:[(0,d.jsxs)("div",{className:"lg:col-span-3 space-y-8",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("h1",{className:"text-2xl font-bold text-slate-900",children:"Hello, Sarah"}),(0,d.jsxs)("p",{className:"text-slate-500 mt-1",children:["Here is the testing progress for ",c,"."]})]}),(0,d.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[(0,d.jsxs)("div",{className:"bg-white rounded-xl border border-slate-200 p-5 shadow-sm",children:[(0,d.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,d.jsx)("span",{className:"text-sm font-medium text-slate-500 uppercase tracking-wide",children:"Progress"}),(0,d.jsx)(m.A,{size:20,className:"text-brand-600"})]}),(0,d.jsxs)("div",{className:"flex items-baseline gap-2",children:[(0,d.jsxs)("span",{className:"text-3xl font-bold text-slate-900",children:[v,"%"]}),(0,d.jsx)("span",{className:"text-xs text-slate-400",children:"completed"})]}),(0,d.jsx)("div",{className:"w-full bg-slate-100 rounded-full h-1.5 mt-3 overflow-hidden",children:(0,d.jsx)("div",{className:"bg-brand-500 h-1.5 rounded-full",style:{width:`${v}%`}})})]}),(0,d.jsxs)("div",{className:"bg-white rounded-xl border border-slate-200 p-5 shadow-sm",children:[(0,d.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,d.jsx)("span",{className:"text-sm font-medium text-slate-500 uppercase tracking-wide",children:"Open Tasks"}),(0,d.jsx)(n.A,{size:20,className:"text-blue-500"})]}),(0,d.jsxs)("div",{className:"flex items-baseline gap-2",children:[(0,d.jsx)("span",{className:"text-3xl font-bold text-slate-900",children:t}),(0,d.jsx)("span",{className:"text-xs text-slate-400",children:"remaining"})]}),(0,d.jsx)("p",{className:"text-xs text-slate-400 mt-3",children:"Due this week"})]}),(0,d.jsxs)("div",{className:"bg-white rounded-xl border border-slate-200 p-5 shadow-sm relative overflow-hidden",children:[(0,d.jsx)("div",{className:"absolute top-0 right-0 w-16 h-16 bg-purple-50 rounded-bl-full -mr-8 -mt-8 z-0"}),(0,d.jsxs)("div",{className:"relative z-10",children:[(0,d.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,d.jsx)("span",{className:"text-sm font-medium text-slate-500 uppercase tracking-wide",children:"Unread"}),(0,d.jsx)(o.A,{size:20,className:"text-purple-600"})]}),(0,d.jsxs)("div",{className:"flex items-baseline gap-2",children:[(0,d.jsx)("span",{className:"text-3xl font-bold text-purple-900",children:w}),(0,d.jsx)("span",{className:"text-xs text-purple-600 font-medium",children:"new comments"})]}),(0,d.jsxs)("button",{className:"text-xs text-purple-700 hover:text-purple-900 font-medium mt-3 flex items-center gap-1",children:["View Discussions ",(0,d.jsx)(p.A,{size:12})]})]})]})]}),(0,d.jsxs)("div",{children:[(0,d.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-center bg-white p-2 rounded-lg border border-slate-200 shadow-sm mb-6",children:[(0,d.jsx)("div",{className:"flex gap-1 bg-slate-100 p-1 rounded-md overflow-x-auto max-w-full",children:["All",i.nW.PENDING,i.nW.IN_PROGRESS,i.nW.PASSED,i.nW.BLOCKED].map(a=>(0,d.jsx)("button",{onClick:()=>g(a),className:`px-4 py-1.5 text-sm font-medium rounded-md whitespace-nowrap transition-all ${e===a?"bg-white text-slate-900 shadow-sm":"text-slate-500 hover:text-slate-700"}`,children:a},a))}),(0,d.jsxs)("div",{className:"relative mt-2 sm:mt-0 w-full sm:w-64",children:[(0,d.jsx)(q.A,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",size:16}),(0,d.jsx)("input",{type:"text",placeholder:"Search tasks...",className:"w-full pl-9 pr-4 py-2 text-sm border-none bg-transparent focus:ring-0 placeholder-slate-400 text-slate-800"})]})]}),(0,d.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:0===r.length?(0,d.jsx)("div",{className:"col-span-full text-center py-20 bg-white rounded-xl border border-dashed border-slate-200",children:(0,d.jsx)("p",{className:"text-slate-400",children:"No tasks found matching your filters."})}):r.map(a=>(0,d.jsxs)("div",{onClick:()=>b(a),className:"group bg-white rounded-xl p-5 border border-slate-200 shadow-sm hover:shadow-md hover:border-brand-200 transition-all cursor-pointer relative overflow-hidden flex flex-col h-full",children:[(0,d.jsx)("div",{className:`absolute top-0 left-0 right-0 h-1 ${a.status===i.nW.PASSED?"bg-emerald-500":a.status===i.nW.FAILED?"bg-rose-500":a.status===i.nW.BLOCKED?"bg-amber-500":a.status===i.nW.IN_PROGRESS?"bg-blue-500":"bg-slate-300"}`}),(0,d.jsxs)("div",{className:"flex justify-between items-start mb-3 pt-2",children:[(0,d.jsx)(k,{type:"module",value:a.featureModule}),(0,d.jsx)(k,{type:"status",value:a.status})]}),(0,d.jsx)("h3",{className:"text-lg font-semibold text-slate-900 group-hover:text-brand-600 transition-colors mb-2 line-clamp-2",children:a.title}),(0,d.jsx)("p",{className:"text-slate-500 text-sm line-clamp-2 mb-4 flex-1",children:a.description}),(0,d.jsxs)("div",{className:"border-t border-slate-100 pt-3 mt-auto flex items-center justify-between",children:[(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[z(a)?(0,d.jsx)("img",{src:z(a),alt:"Assignee",className:"w-6 h-6 rounded-full border border-slate-200"}):(0,d.jsx)("div",{className:"w-6 h-6 rounded-full bg-slate-200 flex items-center justify-center text-[10px] font-bold text-slate-500",children:"?"}),(0,d.jsx)("span",{className:"text-xs text-slate-600 font-medium",children:(a=>a.assignee?.name?a.assignee.name:a.assignee?.email?a.assignee.email:a.assigneeId?a.assigneeId:"Unassigned")(a)})]}),(0,d.jsxs)("div",{className:"flex items-center gap-3",children:[a.steps.reduce((a,b)=>a+b.comments.length,0)>0&&(0,d.jsxs)("span",{className:"flex items-center text-xs text-slate-400 gap-1",children:[(0,d.jsx)(o.A,{size:12})," ",a.steps.reduce((a,b)=>a+b.comments.length,0)]}),(0,d.jsx)(k,{type:"priority",value:a.priority})]})]})]},a.id))})]})]}),(0,d.jsx)("div",{className:"hidden lg:block space-y-6",children:(0,d.jsxs)("div",{className:"bg-white rounded-xl border border-slate-200 shadow-sm p-5 sticky top-24",children:[(0,d.jsx)("h3",{className:"text-sm font-bold text-slate-900 uppercase tracking-wide mb-4",children:"Recent Activity"}),(0,d.jsxs)("div",{className:"space-y-6",children:[0===y.length?(0,d.jsx)("p",{className:"text-sm text-slate-400",children:"No recent activity."}):y.map(a=>(0,d.jsxs)("div",{className:"flex gap-3",children:[(0,d.jsx)("div",{className:"mt-0.5 min-w-[24px]",children:(0,d.jsx)("div",{className:`w-6 h-6 rounded-full flex items-center justify-center text-xs font-bold ${"ALERT"===a.type?"bg-rose-100 text-rose-600":"bg-blue-100 text-blue-600"}`,children:"ALERT"===a.type?"!":"@"})}),(0,d.jsxs)("div",{children:[(0,d.jsx)("p",{className:"text-sm text-slate-700 leading-snug",children:a.message}),(0,d.jsx)("span",{className:"text-xs text-slate-400 block mt-1",children:a.time})]})]},a.id)),(0,d.jsxs)("div",{className:"pt-4 border-t border-slate-100",children:[(0,d.jsx)("h4",{className:"text-xs font-semibold text-slate-500 uppercase mb-2",children:"Helpful Links"}),(0,d.jsxs)("ul",{className:"space-y-2",children:[(0,d.jsx)("li",{children:(0,d.jsx)("a",{href:"#",className:"text-sm text-brand-600 hover:underline",children:"UAT Guidelines PDF"})}),(0,d.jsx)("li",{children:(0,d.jsx)("a",{href:"#",className:"text-sm text-brand-600 hover:underline",children:"Report a System Bug"})}),(0,d.jsx)("li",{children:(0,d.jsx)("a",{href:"#",className:"text-sm text-brand-600 hover:underline",children:"Contact Admin"})})]})]})]})]})})]})]})};var s=c(67748),t=c(16945),u=c(91292);let v=({tasks:a,onSelectTask:b,onManageTasks:c})=>{let e=a.length,f=Math.round(a.filter(a=>a.status===i.nW.PASSED||a.status===i.nW.DEPLOYED).length/e*100)||0,g=a.filter(a=>a.status===i.nW.PENDING||a.status===i.nW.IN_PROGRESS).length,h=a.filter(a=>a.status===i.nW.BLOCKED||a.status===i.nW.FAILED).length,j=Math.round(.3*a.reduce((a,b)=>a+b.steps.reduce((a,b)=>a+b.comments.length,0),0)),l=[...a].sort((a,b)=>{let c=a=>a===i.nW.BLOCKED||a===i.nW.FAILED?3:a===i.nW.IN_PROGRESS?2:+(a===i.nW.PENDING);return c(b.status)-c(a.status)}).slice(0,5);return(0,d.jsxs)("div",{className:"space-y-8 animate-fade-in",children:[(0,d.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-end gap-4",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("h1",{className:"text-2xl font-bold text-slate-900 tracking-tight",children:"Admin Dashboard"}),(0,d.jsx)("p",{className:"text-slate-500",children:"Monitor overall progress and address blockers."})]}),(0,d.jsxs)("div",{className:"flex gap-2",children:[(0,d.jsx)("button",{onClick:c,className:"px-4 py-2 bg-white border border-slate-200 rounded-lg text-sm font-medium text-slate-700 hover:bg-slate-50 shadow-sm",children:"Manage Tasks"}),(0,d.jsx)("button",{onClick:c,className:"px-4 py-2 bg-slate-900 text-white rounded-lg text-sm font-medium hover:bg-slate-800 shadow-sm flex items-center gap-2",children:"+ New Task"})]})]}),(0,d.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,d.jsxs)("div",{className:"bg-white p-5 rounded-xl border border-slate-200 shadow-sm",children:[(0,d.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,d.jsx)("span",{className:"text-slate-500 text-sm font-medium",children:"Overall Progress"}),(0,d.jsx)(s.A,{size:20,className:"text-brand-600"})]}),(0,d.jsxs)("div",{className:"flex items-end gap-2",children:[(0,d.jsxs)("span",{className:"text-3xl font-bold text-slate-900",children:[f,"%"]}),(0,d.jsx)("span",{className:"text-xs text-slate-400 mb-1",children:"completion"})]}),(0,d.jsx)("div",{className:"w-full bg-slate-100 h-1.5 rounded-full mt-3 overflow-hidden",children:(0,d.jsx)("div",{className:"bg-brand-600 h-1.5 rounded-full",style:{width:`${f}%`}})})]}),(0,d.jsxs)("div",{className:"bg-white p-5 rounded-xl border border-slate-200 shadow-sm",children:[(0,d.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,d.jsx)("span",{className:"text-slate-500 text-sm font-medium",children:"Open UAT Tasks"}),(0,d.jsx)(n.A,{size:20,className:"text-blue-500"})]}),(0,d.jsx)("span",{className:"text-3xl font-bold text-slate-900",children:g}),(0,d.jsx)("p",{className:"text-xs text-slate-400 mt-2",children:"Pending or In Progress"})]}),(0,d.jsxs)("div",{className:"bg-white p-5 rounded-xl border border-slate-200 shadow-sm",children:[(0,d.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,d.jsx)("span",{className:"text-slate-500 text-sm font-medium",children:"Blockers / Failed"}),(0,d.jsx)(t.A,{size:20,className:"text-amber-500"})]}),(0,d.jsx)("span",{className:`text-3xl font-bold ${h>0?"text-amber-600":"text-slate-900"}`,children:h}),(0,d.jsx)("p",{className:"text-xs text-slate-400 mt-2",children:"Requires attention"})]}),(0,d.jsxs)("div",{className:"bg-white p-5 rounded-xl border border-slate-200 shadow-sm",children:[(0,d.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,d.jsx)("span",{className:"text-slate-500 text-sm font-medium",children:"Unread Comments"}),(0,d.jsx)(o.A,{size:20,className:"text-purple-500"})]}),(0,d.jsx)("span",{className:"text-3xl font-bold text-slate-900",children:j}),(0,d.jsx)("p",{className:"text-xs text-slate-400 mt-2",children:"From stakeholders"})]})]}),(0,d.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,d.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[(0,d.jsxs)("div",{className:"flex justify-between items-center",children:[(0,d.jsx)("h3",{className:"font-bold text-slate-900",children:"Priority Tasks (Open & Issues)"}),(0,d.jsx)("span",{className:"text-xs text-slate-500 bg-slate-100 px-2 py-1 rounded",children:"Sorted by Urgency"})]}),(0,d.jsx)("div",{className:"space-y-4",children:l.map(a=>(0,d.jsxs)("div",{onClick:()=>b(a),className:"bg-white rounded-xl p-5 border border-slate-200 shadow-sm hover:border-brand-300 transition-all cursor-pointer group",children:[(0,d.jsxs)("div",{className:"flex justify-between items-start",children:[(0,d.jsxs)("div",{className:"space-y-1",children:[(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[(0,d.jsx)(k,{type:"module",value:a.featureModule}),(0,d.jsx)("span",{className:"text-xs text-slate-500 font-medium bg-slate-100 px-2 py-0.5 rounded-full",children:a.countryCode})]}),(0,d.jsx)("h4",{className:"font-semibold text-slate-900 group-hover:text-brand-600",children:a.title}),(0,d.jsx)("p",{className:"text-sm text-slate-500 line-clamp-1",children:a.description})]}),(0,d.jsx)(k,{type:"status",value:a.status})]}),(0,d.jsxs)("div",{className:"mt-4 pt-4 border-t border-slate-100 flex justify-between items-center",children:[(0,d.jsxs)("div",{className:"flex items-center gap-4 text-xs text-slate-500",children:[(0,d.jsxs)("span",{children:["Assignee: ",(0,d.jsx)("strong",{children:a.assignee?.name||a.assignee?.email||a.assigneeId||"Unassigned"})]}),(0,d.jsxs)("span",{children:["Due: ",a.dueDate]})]}),(0,d.jsx)(p.A,{size:18,className:"text-slate-300 group-hover:text-brand-500"})]})]},a.id))}),(0,d.jsx)("button",{onClick:c,className:"w-full py-3 text-sm text-slate-500 font-medium hover:text-brand-600 hover:bg-slate-50 border border-dashed border-slate-200 rounded-xl transition-colors",children:"View All Tasks"})]}),(0,d.jsx)("div",{className:"space-y-6",children:(0,d.jsxs)("div",{className:"bg-white rounded-xl border border-slate-200 shadow-sm p-6",children:[(0,d.jsxs)("h3",{className:"font-bold text-slate-900 mb-4 flex items-center gap-2",children:[(0,d.jsx)(t.A,{size:18,className:"text-amber-500"})," Critical Issues"]}),(0,d.jsx)("div",{className:"space-y-3",children:0===a.filter(a=>a.status===i.nW.FAILED||a.status===i.nW.BLOCKED).length?(0,d.jsx)("p",{className:"text-sm text-slate-400",children:"No critical issues found."}):a.filter(a=>a.status===i.nW.FAILED||a.status===i.nW.BLOCKED).map(a=>(0,d.jsxs)("div",{onClick:()=>b(a),className:"flex items-start gap-3 p-3 bg-red-50/50 rounded-lg border border-red-100 hover:bg-red-50 cursor-pointer transition-colors",children:[(0,d.jsx)(u.A,{size:16,className:"text-red-500 mt-0.5 flex-shrink-0"}),(0,d.jsxs)("div",{children:[(0,d.jsx)("p",{className:"text-xs font-bold text-red-800 line-clamp-1",children:a.title}),(0,d.jsxs)("p",{className:"text-[10px] text-red-600 mt-0.5",children:[a.countryCode," • ",a.status]})]})]},a.id))})]})})]})]})};var w=c(80696),x=c(8849),y=c(81925),z=c(84122),A=c(40284),B=c(47089),C=c(80196),D=c(81100);let E=({tasks:a,onImport:b,onEdit:c,onAddTask:e,availableCountries:g,availableModules:h})=>{let[l,m]=(0,f.useState)(""),[n,o]=(0,f.useState)(!1),[p,r]=(0,f.useState)({title:"",description:"",featureModule:"Ordering",priority:i.bx.MEDIUM,assigneeId:j.o1[0].id,dueDate:"",scope:"Local",targetSystem:"Ordering Portal",crNumber:""}),[s,t]=(0,f.useState)(["SG"]),[u,v]=(0,f.useState)([{id:"1",description:"",expectedResult:"",countryFilter:"ALL",testData:""}]),E=a.filter(a=>a.title.toLowerCase().includes(l.toLowerCase())||a.featureModule.toLowerCase().includes(l.toLowerCase())),F=(a,b,c)=>{let d=[...u];d[a]={...d[a],[b]:c},v(d)};return(0,d.jsxs)("div",{className:"space-y-6 animate-fade-in relative",children:[(0,d.jsxs)("div",{className:"flex justify-between items-center",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("h1",{className:"text-2xl font-bold text-slate-900",children:"Task Management"}),(0,d.jsx)("p",{className:"text-slate-500",children:"Create, edit, and organize UAT scenarios."})]}),(0,d.jsxs)("div",{className:"flex gap-2",children:[(0,d.jsxs)("button",{onClick:b,className:"px-4 py-2 bg-white border border-slate-200 rounded-lg text-sm font-medium text-slate-700 hover:bg-slate-50 shadow-sm flex items-center gap-2",children:[(0,d.jsx)(w.A,{size:16})," Import Excel"]}),(0,d.jsxs)("button",{onClick:()=>o(!0),className:"px-4 py-2 bg-slate-900 text-white rounded-lg text-sm font-medium hover:bg-slate-800 shadow-sm flex items-center gap-2",children:[(0,d.jsx)(x.A,{size:16})," New Task"]})]})]}),(0,d.jsxs)("div",{className:"bg-white rounded-xl border border-slate-200 shadow-sm overflow-hidden",children:[(0,d.jsxs)("div",{className:"p-4 border-b border-slate-200 flex justify-between items-center bg-slate-50",children:[(0,d.jsxs)("div",{className:"relative max-w-sm w-full",children:[(0,d.jsx)(q.A,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",size:16}),(0,d.jsx)("input",{type:"text",className:"w-full pl-9 pr-4 py-2 text-sm border-slate-300 rounded-lg focus:ring-slate-500 focus:border-slate-500",placeholder:"Search tasks...",value:l,onChange:a=>m(a.target.value)})]}),(0,d.jsx)("button",{className:"p-2 text-slate-500 hover:bg-slate-200 rounded-lg",children:(0,d.jsx)(y.A,{size:18})})]}),(0,d.jsx)("div",{className:"overflow-x-auto",children:(0,d.jsxs)("table",{className:"w-full text-sm text-left",children:[(0,d.jsx)("thead",{className:"bg-slate-50 text-slate-500 font-medium border-b border-slate-200",children:(0,d.jsxs)("tr",{children:[(0,d.jsx)("th",{className:"px-6 py-4",children:"Task Title"}),(0,d.jsx)("th",{className:"px-6 py-4",children:"Module"}),(0,d.jsx)("th",{className:"px-6 py-4",children:"Country"}),(0,d.jsx)("th",{className:"px-6 py-4",children:"Status"}),(0,d.jsx)("th",{className:"px-6 py-4",children:"Priority"}),(0,d.jsx)("th",{className:"px-6 py-4 text-right",children:"Actions"})]})}),(0,d.jsx)("tbody",{className:"divide-y divide-slate-100",children:E.map(a=>(0,d.jsxs)("tr",{className:"hover:bg-slate-50 transition-colors",children:[(0,d.jsx)("td",{className:"px-6 py-4 font-medium text-slate-900",children:a.title}),(0,d.jsx)("td",{className:"px-6 py-4",children:(0,d.jsx)(k,{type:"module",value:a.featureModule})}),(0,d.jsx)("td",{className:"px-6 py-4",children:a.countryCode}),(0,d.jsx)("td",{className:"px-6 py-4",children:(0,d.jsx)(k,{type:"status",value:a.status})}),(0,d.jsx)("td",{className:"px-6 py-4",children:(0,d.jsx)(k,{type:"priority",value:a.priority})}),(0,d.jsx)("td",{className:"px-6 py-4 text-right",children:(0,d.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,d.jsx)("button",{onClick:()=>c(a),className:"p-1.5 text-slate-500 hover:text-brand-600 hover:bg-brand-50 rounded",children:(0,d.jsx)(z.A,{size:16})}),(0,d.jsx)("button",{className:"p-1.5 text-slate-500 hover:text-red-600 hover:bg-red-50 rounded",children:(0,d.jsx)(A.A,{size:16})})]})})]},a.id))})]})}),(0,d.jsxs)("div",{className:"p-4 border-t border-slate-200 bg-slate-50 text-xs text-slate-500 text-center",children:["Showing ",E.length," tasks"]})]}),n&&(0,d.jsx)("div",{className:"fixed inset-0 bg-slate-900/50 flex items-center justify-center z-50 p-4 overflow-y-auto",children:(0,d.jsxs)("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-5xl animate-in zoom-in-95 my-8",children:[(0,d.jsxs)("div",{className:"px-6 py-4 border-b border-slate-100 flex justify-between items-center bg-slate-50 rounded-t-xl",children:[(0,d.jsx)("h2",{className:"text-lg font-bold text-slate-900",children:"Create New Task"}),(0,d.jsx)("button",{onClick:()=>o(!1),className:"text-slate-400 hover:text-slate-600",children:(0,d.jsx)(B.A,{size:20})})]}),(0,d.jsxs)("div",{className:"p-6 space-y-6 max-h-[70vh] overflow-y-auto",children:[(0,d.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Title"}),(0,d.jsx)("input",{type:"text",className:"w-full rounded-md border-slate-300 focus:ring-slate-500 focus:border-slate-500 text-sm",placeholder:"e.g. Verify Cart Calculation",value:p.title,onChange:a=>r({...p,title:a.target.value})})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Target System"}),(0,d.jsxs)("select",{className:"w-full rounded-md border-slate-300 focus:ring-slate-500 focus:border-slate-500 text-sm",value:p.targetSystem,onChange:a=>r({...p,targetSystem:a.target.value}),children:[(0,d.jsx)("option",{value:"Ordering Portal",children:"Ordering Portal"}),(0,d.jsx)("option",{value:"Admin Portal",children:"Admin Portal"})]})]})]}),(0,d.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Module"}),(0,d.jsx)("select",{className:"w-full rounded-md border-slate-300 focus:ring-slate-500 focus:border-slate-500 text-sm",value:p.featureModule,onChange:a=>r({...p,featureModule:a.target.value}),children:h.map(a=>(0,d.jsx)("option",{children:a},a))})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Priority"}),(0,d.jsxs)("select",{className:"w-full rounded-md border-slate-300 focus:ring-slate-500 focus:border-slate-500 text-sm",value:p.priority,onChange:a=>r({...p,priority:a.target.value}),children:[(0,d.jsx)("option",{value:i.bx.LOW,children:"Low"}),(0,d.jsx)("option",{value:i.bx.MEDIUM,children:"Medium"}),(0,d.jsx)("option",{value:i.bx.HIGH,children:"High"}),(0,d.jsx)("option",{value:i.bx.CRITICAL,children:"Critical"})]})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"CR No (Optional)"}),(0,d.jsx)("input",{type:"text",className:"w-full rounded-md border-slate-300 focus:ring-slate-500 focus:border-slate-500 text-sm",placeholder:"e.g. CR-123",value:p.crNumber,onChange:a=>r({...p,crNumber:a.target.value})})]})]}),(0,d.jsxs)("div",{className:"bg-slate-50 p-4 rounded-lg border border-slate-200",children:[(0,d.jsxs)("label",{className:"block text-sm font-medium text-slate-700 mb-2 flex items-center gap-2",children:[(0,d.jsx)(C.A,{size:16})," Assign Countries (Multi-select)"]}),(0,d.jsx)("div",{className:"flex flex-wrap gap-2",children:g.map(a=>{let b=s.includes(a.code);return(0,d.jsxs)("button",{onClick:()=>(a=>{s.includes(a)?s.length>1&&t(s.filter(b=>b!==a)):t([...s,a])})(a.code),className:`px-3 py-1 rounded-full text-xs font-medium border transition-all ${b?"bg-slate-800 text-white border-slate-800":"bg-white text-slate-600 border-slate-300 hover:border-slate-400"}`,children:[a.name," ",b&&"✓"]},a.code)})}),(0,d.jsx)("p",{className:"text-[10px] text-slate-500 mt-2",children:"A separate task instance will be created for each selected country."})]}),(0,d.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,d.jsxs)("div",{className:"md:col-span-2",children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Description"}),(0,d.jsx)("textarea",{className:"w-full rounded-md border-slate-300 focus:ring-slate-500 focus:border-slate-500 text-sm h-20",placeholder:"Description of the test case...",value:p.description,onChange:a=>r({...p,description:a.target.value})})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Due Date"}),(0,d.jsx)("input",{type:"date",className:"w-full rounded-md border-slate-300 focus:ring-slate-500 focus:border-slate-500 text-sm",value:p.dueDate,onChange:a=>r({...p,dueDate:a.target.value})})]})]}),(0,d.jsxs)("div",{className:"border-t border-slate-100 pt-4",children:[(0,d.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,d.jsx)("h3",{className:"font-semibold text-slate-900 text-sm",children:"Test Steps"}),(0,d.jsxs)("button",{type:"button",onClick:()=>{v([...u,{id:`${u.length+1}`,description:"",expectedResult:"",countryFilter:"ALL",testData:""}])},className:"text-xs text-blue-600 hover:text-blue-700 font-medium flex items-center gap-1",children:[(0,d.jsx)(x.A,{size:12})," Add Step"]})]}),(0,d.jsxs)("div",{className:"bg-slate-50 rounded-lg border border-slate-200 overflow-hidden",children:[(0,d.jsxs)("div",{className:"grid grid-cols-12 gap-0 text-xs font-semibold text-slate-500 bg-slate-100 border-b border-slate-200 p-2",children:[(0,d.jsx)("div",{className:"col-span-1 text-center",children:"#"}),(0,d.jsx)("div",{className:"col-span-3",children:"Description"}),(0,d.jsx)("div",{className:"col-span-3",children:"Expected Result"}),(0,d.jsx)("div",{className:"col-span-2",children:"Test Data"}),(0,d.jsx)("div",{className:"col-span-2",children:"Applicable To"}),(0,d.jsx)("div",{className:"col-span-1"})]}),(0,d.jsx)("div",{className:"divide-y divide-slate-200",children:u.map((a,b)=>(0,d.jsxs)("div",{className:"grid grid-cols-12 gap-2 p-2 items-start hover:bg-white transition-colors",children:[(0,d.jsx)("div",{className:"col-span-1 flex items-center justify-center pt-2",children:(0,d.jsx)("span",{className:"w-5 h-5 rounded-full bg-slate-200 text-slate-500 text-xs flex items-center justify-center font-bold",children:b+1})}),(0,d.jsx)("div",{className:"col-span-3",children:(0,d.jsx)("textarea",{placeholder:"Step Action",className:"w-full text-xs border-slate-300 rounded focus:ring-slate-500 focus:border-slate-500",rows:2,value:a.description,onChange:a=>F(b,"description",a.target.value)})}),(0,d.jsx)("div",{className:"col-span-3",children:(0,d.jsx)("textarea",{placeholder:"Expected Result",className:"w-full text-xs border-slate-300 rounded focus:ring-slate-500 focus:border-slate-500",rows:2,value:a.expectedResult,onChange:a=>F(b,"expectedResult",a.target.value)})}),(0,d.jsx)("div",{className:"col-span-2",children:(0,d.jsx)("input",{placeholder:"Input data...",className:"w-full text-xs border-slate-300 rounded focus:ring-slate-500 focus:border-slate-500",value:a.testData,onChange:a=>F(b,"testData",a.target.value)})}),(0,d.jsx)("div",{className:"col-span-2",children:(0,d.jsxs)("select",{className:"w-full text-xs border-slate-300 rounded focus:ring-slate-500 focus:border-slate-500",value:a.countryFilter||"ALL",onChange:a=>F(b,"countryFilter",a.target.value),children:[(0,d.jsx)("option",{value:"ALL",children:"All Selected"}),s.map(a=>(0,d.jsxs)("option",{value:a,children:[a," Only"]},a))]})}),(0,d.jsx)("div",{className:"col-span-1 flex justify-center pt-2",children:(0,d.jsx)("button",{onClick:()=>(a=>{let b=[...u];b.splice(a,1),v(b)})(b),className:"text-slate-400 hover:text-red-500",children:(0,d.jsx)(A.A,{size:14})})})]},b))})]})]})]}),(0,d.jsxs)("div",{className:"px-6 py-4 bg-slate-50 border-t border-slate-100 rounded-b-xl flex justify-end gap-3",children:[(0,d.jsx)("button",{onClick:()=>o(!1),className:"px-4 py-2 text-slate-600 hover:text-slate-800 text-sm font-medium",children:"Cancel"}),(0,d.jsxs)("button",{onClick:()=>{if(!p.title)return;let a=[];s.forEach(b=>{let c=u.filter(a=>"ALL"===a.countryFilter||a.countryFilter===b);if(0===c.length)return;let d={id:`t_${Date.now()}_${b}`,title:p.title||"Untitled",description:p.description||"",featureModule:p.featureModule||"General",status:i.nW.PENDING,priority:p.priority||i.bx.MEDIUM,countryCode:b,assigneeId:p.assigneeId||"u1",dueDate:p.dueDate||new Date().toISOString().split("T")[0],scope:p.scope||"Local",targetSystem:p.targetSystem||"Ordering Portal",crNumber:p.crNumber,steps:c.map((a,c)=>({id:`s_${Date.now()}_${b}_${c}`,description:a.description||"",expectedResult:a.expectedResult||"",testData:a.testData||"",isPassed:null,comments:[]})),updatedAt:"Just now"};a.push(d)}),e(a),o(!1),r({featureModule:"Ordering",priority:i.bx.MEDIUM,targetSystem:"Ordering Portal"}),t(["SG"]),v([{id:"1",description:"",expectedResult:"",countryFilter:"ALL",testData:""}])},className:"px-4 py-2 bg-slate-900 text-white rounded-md hover:bg-slate-800 text-sm font-medium flex items-center gap-2",children:[(0,d.jsx)(D.A,{size:16})," Create ",s.length," Tasks"]})]})]})})]})};var F=c(70045);let G=({countries:a,modules:b,onUpdateCountries:c,onUpdateModules:e})=>{let[g,h]=(0,f.useState)("countries"),[i,j]=(0,f.useState)(""),[k,l]=(0,f.useState)(""),[m,n]=(0,f.useState)("");return(0,d.jsxs)("div",{className:"max-w-4xl mx-auto animate-fade-in",children:[(0,d.jsxs)("div",{className:"mb-8",children:[(0,d.jsx)("h1",{className:"text-2xl font-bold text-slate-900",children:"System Database"}),(0,d.jsx)("p",{className:"text-slate-500",children:"Manage Master Data and List of Values."})]}),(0,d.jsxs)("div",{className:"flex gap-4 mb-6 border-b border-slate-200",children:[(0,d.jsx)("button",{onClick:()=>h("countries"),className:`pb-3 px-4 text-sm font-medium transition-colors border-b-2 ${"countries"===g?"border-slate-900 text-slate-900":"border-transparent text-slate-500 hover:text-slate-700"}`,children:"Countries"}),(0,d.jsx)("button",{onClick:()=>h("modules"),className:`pb-3 px-4 text-sm font-medium transition-colors border-b-2 ${"modules"===g?"border-slate-900 text-slate-900":"border-transparent text-slate-500 hover:text-slate-700"}`,children:"Modules"})]}),"countries"===g&&(0,d.jsxs)("div",{className:"bg-white rounded-xl border border-slate-200 shadow-sm p-6",children:[(0,d.jsxs)("div",{className:"flex gap-3 mb-6 items-end bg-slate-50 p-4 rounded-lg",children:[(0,d.jsxs)("div",{className:"flex-1",children:[(0,d.jsx)("label",{className:"text-xs font-semibold text-slate-500 uppercase",children:"Country Name"}),(0,d.jsx)("input",{type:"text",className:"w-full mt-1 border-slate-300 rounded-md text-sm",placeholder:"e.g. Indonesia",value:i,onChange:a=>j(a.target.value)})]}),(0,d.jsxs)("div",{className:"w-32",children:[(0,d.jsx)("label",{className:"text-xs font-semibold text-slate-500 uppercase",children:"Code"}),(0,d.jsx)("input",{type:"text",className:"w-full mt-1 border-slate-300 rounded-md text-sm uppercase",placeholder:"ID",maxLength:2,value:k,onChange:a=>l(a.target.value)})]}),(0,d.jsxs)("button",{onClick:()=>{i&&k&&(c([...a,{name:i,code:k.toUpperCase(),color:"bg-slate-100 text-slate-600"}]),j(""),l(""))},className:"bg-slate-900 text-white px-4 py-2 rounded-md text-sm font-medium hover:bg-slate-800 flex items-center gap-2 h-[38px]",children:[(0,d.jsx)(x.A,{size:16})," Add"]})]}),(0,d.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:a.map(b=>(0,d.jsxs)("div",{className:"flex justify-between items-center p-3 border border-slate-200 rounded-lg",children:[(0,d.jsxs)("div",{className:"flex items-center gap-3",children:[(0,d.jsx)("div",{className:"w-8 h-8 rounded-full bg-slate-100 flex items-center justify-center text-slate-600 font-bold text-xs",children:b.code}),(0,d.jsx)("span",{className:"text-sm font-medium text-slate-900",children:b.name})]}),(0,d.jsx)("button",{onClick:()=>{var d;return d=b.code,void c(a.filter(a=>a.code!==d))},className:"text-slate-400 hover:text-red-500 p-1",children:(0,d.jsx)(A.A,{size:16})})]},b.code))})]}),"modules"===g&&(0,d.jsxs)("div",{className:"bg-white rounded-xl border border-slate-200 shadow-sm p-6",children:[(0,d.jsxs)("div",{className:"flex gap-3 mb-6 items-end bg-slate-50 p-4 rounded-lg",children:[(0,d.jsxs)("div",{className:"flex-1",children:[(0,d.jsx)("label",{className:"text-xs font-semibold text-slate-500 uppercase",children:"Module Name"}),(0,d.jsx)("input",{type:"text",className:"w-full mt-1 border-slate-300 rounded-md text-sm",placeholder:"e.g. Logistics",value:m,onChange:a=>n(a.target.value)})]}),(0,d.jsxs)("button",{onClick:()=>{m&&!b.includes(m)&&(e([...b,m]),n(""))},className:"bg-slate-900 text-white px-4 py-2 rounded-md text-sm font-medium hover:bg-slate-800 flex items-center gap-2 h-[38px]",children:[(0,d.jsx)(x.A,{size:16})," Add"]})]}),(0,d.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:b.map(a=>(0,d.jsxs)("div",{className:"flex justify-between items-center p-3 border border-slate-200 rounded-lg",children:[(0,d.jsxs)("div",{className:"flex items-center gap-3",children:[(0,d.jsx)(F.A,{size:18,className:"text-slate-400"}),(0,d.jsx)("span",{className:"text-sm font-medium text-slate-900",children:a})]}),(0,d.jsx)("button",{onClick:()=>{e(b.filter(b=>b!==a))},className:"text-slate-400 hover:text-red-500 p-1",children:(0,d.jsx)(A.A,{size:16})})]},a))})]})]})};var H=c(61753);let I=({onEnd:a})=>{let b=(0,f.useRef)(null),[c,e]=(0,f.useState)(!1),[g,h]=(0,f.useState)(!1);(0,f.useEffect)(()=>{let a=b.current;if(!a)return;a.width=a.offsetWidth,a.height=a.offsetHeight;let c=a.getContext("2d");c&&(c.lineWidth=2,c.lineCap="round",c.strokeStyle="#0f172a");let d=()=>{let b=a.toDataURL();a.width=a.offsetWidth,a.height=a.offsetHeight;let d=new Image;d.src=b,d.onload=()=>c?.drawImage(d,0,0)};return window.addEventListener("resize",d),()=>window.removeEventListener("resize",d)},[]);let i=()=>{e(!1),b.current&&a(b.current.toDataURL())},j=a=>{let d,e;if(!c)return;let f=b.current,i=f?.getContext("2d");if(!f||!i)return;let j=f.getBoundingClientRect();"touches"in a?(d=a.touches[0].clientX,e=a.touches[0].clientY):(d=a.clientX,e=a.clientY);let k=d-j.left,l=e-j.top;i.lineTo(k,l),i.stroke(),i.beginPath(),i.moveTo(k,l),g||h(!0)},k=a=>{e(!0);let c=b.current,d=c?.getContext("2d");c&&d&&(d.beginPath(),j(a))};return(0,d.jsxs)("div",{className:"relative border-2 border-dashed border-slate-300 rounded-lg bg-white h-40 w-full touch-none",children:[(0,d.jsx)("canvas",{ref:b,className:"w-full h-full cursor-crosshair",onMouseDown:k,onMouseUp:i,onMouseMove:j,onMouseLeave:i,onTouchStart:k,onTouchEnd:i,onTouchMove:j}),!g&&(0,d.jsx)("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none text-slate-300",children:"Sign Here"}),g&&(0,d.jsx)("button",{onClick:()=>{let c=b.current,d=c?.getContext("2d");c&&d&&(d.clearRect(0,0,c.width,c.height),h(!1),a(null))},className:"absolute top-2 right-2 p-1 bg-slate-100 text-slate-500 rounded hover:bg-slate-200",title:"Clear Signature",children:(0,d.jsx)(H.A,{size:16})})]})};var J=c(79944),K=c(67621),L=c(3663),M=c(34487),N=c(78583),O=c(50117),P=c(10578),Q=c(72567),R=c(46148),S=c(58709),T=c(82042),U=c(85351),V=c(65828),W=c(71563),X=c(22842),Y=c(14257);console.log("TaskDetail rendered");let Z=({task:a,currentUser:b,onBack:c,onUpdateTask:e})=>{let[g,h]=(0,f.useState)(a),[j,n]=(0,f.useState)(a.steps.find(a=>null===a.isPassed)?.id||a.steps[0]?.id||null),[o,p]=(0,f.useState)(!1),[q,r]=(0,f.useState)(""),[s,t]=(0,f.useState)({}),[v,w]=(0,f.useState)(null),[x,y]=(0,f.useState)(null),[z,A]=(0,f.useState)(!1),D=b.role===i.Xh.ADMIN,E=g.status===i.nW.DEPLOYED,F=!!g.signedOff,G="Admin Portal"===g.targetSystem?"https://www.easyorderadminstg.dksh.com":"https://www.easyorderstg.dksh.com",H=(a,b)=>{if(F)return;let c=g.steps.map(c=>c.id===a?{...c,...b,completedAt:null!==b.isPassed?new Date().toLocaleString():void 0}:c),d=g.status,f={...g,steps:c};if(c.every(a=>!0===a.isPassed)&&g.status!==i.nW.DEPLOYED&&g.status!==i.nW.PASSED?f.status=i.nW.PASSED:c.some(a=>!1===a.isPassed)?f.status=i.nW.FAILED:c.some(a=>!0===a.isPassed)&&g.status===i.nW.PENDING&&(f.status=i.nW.IN_PROGRESS),h(f),e(f),f.status!==d&&_(f.status),!0===b.isPassed){let b=g.steps.findIndex(b=>b.id===a),c=g.steps[b+1];c?n(c.id):n(null)}},Z=async a=>{let b=s[a];b&&b.trim()&&(await fetch(`/api/tasks/${g.id}/comments`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({body:b})})).ok&&(await $(g.id),t({...s,[a]:""}))},$=async a=>{let b=await fetch(`/api/tasks/${a}`,{cache:"no-store"});if(!b.ok)return;let c=await b.json();h(c),e(c)},_=async a=>{await fetch(`/api/tasks/${g.id}/status`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:a})})};return(0,f.useEffect)(()=>{h(a),$(a.id)},[a.id]),(0,d.jsxs)("div",{className:"max-w-5xl mx-auto animate-fade-in pb-20 print:p-0 print:max-w-none",children:[(0,d.jsxs)("div",{className:"flex justify-between items-center mb-6 print:hidden",children:[(0,d.jsxs)("button",{onClick:c,className:"flex items-center gap-2 text-slate-500 hover:text-slate-800 transition-colors",children:[(0,d.jsx)(J.A,{size:18})," Back"]}),D&&!E&&g.status===i.nW.PASSED&&(0,d.jsxs)("button",{onClick:()=>p(!0),className:"flex items-center gap-2 px-4 py-2 bg-slate-900 text-white rounded-lg hover:bg-slate-800 transition-colors shadow-sm",children:[(0,d.jsx)(K.A,{size:16})," Deploy Feature"]})]}),(0,d.jsxs)("div",{className:"space-y-6",children:[(0,d.jsxs)("div",{className:"bg-white rounded-xl border border-slate-200 shadow-sm p-6 relative overflow-hidden print:border-0 print:shadow-none",children:[E&&(0,d.jsxs)("div",{className:"absolute top-0 right-0 bg-green-500 text-white text-xs font-bold px-3 py-1 rounded-bl-lg z-10 print:hidden",children:["DEPLOYED ",g.deployment?.deployedAt]}),(0,d.jsxs)("div",{className:"flex items-start justify-between gap-4 mb-4",children:[(0,d.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,d.jsx)(k,{type:"module",value:g.featureModule}),(0,d.jsxs)("span",{className:`inline-flex items-center gap-1 px-2 py-0.5 rounded text-xs font-medium border ${"Global"===g.scope?"bg-purple-50 text-purple-700 border-purple-100":"bg-slate-100 text-slate-600 border-slate-200"}`,children:[(0,d.jsx)(C.A,{size:12})," ",g.scope]}),g.crNumber&&(0,d.jsxs)("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded text-xs font-medium bg-orange-50 text-orange-700 border border-orange-100",children:[(0,d.jsx)(L.A,{size:12})," ",g.crNumber]})]}),(0,d.jsx)(k,{type:"status",value:g.status})]}),(0,d.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-start gap-4 mb-4",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("h1",{className:"text-2xl font-bold text-slate-900 mb-2",children:g.title}),(0,d.jsx)("p",{className:"text-slate-600",children:g.description})]}),(0,d.jsxs)("a",{href:G,target:"_blank",rel:"noreferrer",className:"flex-shrink-0 inline-flex items-center gap-2 px-5 py-3 bg-brand-600 text-white rounded-lg shadow-sm hover:bg-brand-700 transition-colors font-medium text-sm print:hidden",children:[(0,d.jsx)(M.A,{size:18})," Launch ",g.targetSystem,(0,d.jsx)(N.A,{size:14,className:"opacity-70"})]})]}),(0,d.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 pt-4 border-t border-slate-100",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("span",{className:"text-xs text-slate-400 block mb-1",children:"Jira Ticket"}),(0,d.jsxs)("a",{href:"#",className:"flex items-center gap-1 text-sm font-medium text-blue-600 hover:underline",children:[(0,d.jsx)(O.A,{size:12})," ",g.jiraTicket||"N/A"]})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("span",{className:"text-xs text-slate-400 block mb-1",children:"Developer"}),(0,d.jsxs)("span",{className:"flex items-center gap-1 text-sm font-medium text-slate-700",children:[(0,d.jsx)(P.A,{size:12})," ",g.developer||"Unassigned"]})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("span",{className:"text-xs text-slate-400 block mb-1",children:"Due Date"}),(0,d.jsxs)("span",{className:"flex items-center gap-1 text-sm font-medium text-slate-700",children:[(0,d.jsx)(Q.A,{size:12})," ",g.dueDate]})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("span",{className:"text-xs text-slate-400 block mb-1",children:"Priority"}),(0,d.jsx)(k,{type:"priority",value:g.priority})]})]})]}),(0,d.jsxs)("div",{className:"bg-white rounded-xl border border-slate-200 shadow-sm overflow-hidden print:border-0 print:shadow-none",children:[(0,d.jsxs)("div",{className:"p-4 bg-slate-50 border-b border-slate-200 flex justify-between items-center print:bg-white print:border-b-2 print:border-slate-800",children:[(0,d.jsxs)("h3",{className:"font-semibold text-slate-900 flex items-center gap-2",children:[(0,d.jsx)(m.A,{size:18,className:"text-slate-400"})," Test Steps"]}),(0,d.jsxs)("div",{className:"text-xs font-medium text-slate-500",children:[g.steps.filter(a=>!0===a.isPassed).length," / ",g.steps.length," Steps Completed"]})]}),(0,d.jsx)("div",{className:"divide-y divide-slate-100",children:g.steps.map((a,b)=>{let c=j===a.id,e=!0===a.isPassed?"bg-emerald-100 border-emerald-200 text-emerald-700":!1===a.isPassed?"bg-rose-100 border-rose-200 text-rose-700":"bg-white border-slate-200 text-slate-500";return(0,d.jsxs)("div",{className:`transition-all outline-none ${c?"bg-white":"bg-slate-50/30"} print:bg-white print:break-inside-avoid`,onPaste:b=>c&&((a,b)=>{if(F)return;let c=a.clipboardData.items;for(let d=0;d<c.length;d++)if(-1!==c[d].type.indexOf("image")){let e=c[d].getAsFile(),f=new FileReader;f.onload=a=>{let c=a.target?.result,d=g.steps.find(a=>a.id===b);d&&H(b,{attachments:[...d.attachments||[],c]})},e&&f.readAsDataURL(e),a.preventDefault()}})(b,a.id),tabIndex:c?0:-1,children:[(0,d.jsxs)("div",{onClick:()=>n(c?null:a.id),className:"p-4 flex items-center gap-4 cursor-pointer hover:bg-slate-50 print:cursor-default",children:[(0,d.jsx)("div",{className:`w-8 h-8 rounded-full border flex items-center justify-center text-sm font-bold flex-shrink-0 ${e}`,children:!0===a.isPassed?(0,d.jsx)(m.A,{size:16}):!1===a.isPassed?(0,d.jsx)(u.A,{size:16}):b+1}),(0,d.jsxs)("div",{className:"flex-1",children:[(0,d.jsx)("div",{className:"flex items-center gap-2 mb-1",children:(0,d.jsx)("p",{className:`text-sm font-medium ${!0===a.isPassed?"text-slate-400 line-through":"text-slate-900"}`,children:a.description})}),a.completedAt&&(0,d.jsxs)("p",{className:"text-[10px] text-slate-400",children:["Executed: ",a.completedAt]})]}),(0,d.jsxs)("div",{className:"flex items-center gap-2 print:hidden",children:[a.attachments&&a.attachments.length>0&&(0,d.jsxs)("span",{className:"flex items-center gap-1 text-xs text-slate-400 bg-slate-100 px-2 py-0.5 rounded-full",title:"Attachments",children:[(0,d.jsx)(R.A,{size:10})," ",a.attachments.length]}),a.comments.length>0&&(0,d.jsxs)("span",{className:"flex items-center gap-1 text-xs text-slate-400 bg-slate-100 px-2 py-0.5 rounded-full",title:"Comments",children:[(0,d.jsx)(S.A,{size:10})," ",a.comments.length]}),c?(0,d.jsx)(T.A,{size:16,className:"text-slate-400"}):(0,d.jsx)(U.A,{size:16,className:"text-slate-400"})]})]}),(c||F)&&(0,d.jsx)("div",{className:"px-4 pb-6 pt-0 animate-in slide-in-from-top-2",children:(0,d.jsxs)("div",{className:"ml-12 space-y-4",children:[(0,d.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,d.jsxs)("div",{className:"space-y-4",children:[(0,d.jsxs)("div",{className:"bg-slate-50 p-3 rounded-lg border border-slate-100 print:bg-white print:border-slate-300",children:[(0,d.jsx)("span",{className:"text-[10px] uppercase font-bold text-slate-400 tracking-wider mb-2 block",children:"Expected Result"}),(0,d.jsx)("p",{className:"text-sm text-slate-700",children:a.expectedResult})]}),a.testData&&(0,d.jsxs)("div",{children:[(0,d.jsxs)("span",{className:"text-[10px] uppercase font-bold text-brand-600 tracking-wider mb-1 block flex items-center gap-1",children:[(0,d.jsx)(V.A,{size:10})," Test Data"]}),(0,d.jsx)("code",{className:"text-xs bg-slate-50 px-2 py-1.5 rounded border border-slate-200 text-slate-700 block font-mono",children:a.testData})]})]}),(0,d.jsxs)("div",{className:"space-y-3",children:[F?a.actualResult&&(0,d.jsxs)("div",{className:"bg-white p-3 rounded border border-slate-200 text-sm text-slate-700 italic",children:[(0,d.jsx)("span",{className:"text-[10px] uppercase font-bold text-slate-400 tracking-wider mb-1 block",children:"Actual Result"}),'"',a.actualResult,'"']}):(0,d.jsxs)("div",{className:"print:hidden",children:[(0,d.jsx)("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wide mb-1 block",children:"Actual Result"}),(0,d.jsx)("textarea",{className:"w-full text-sm rounded-lg border-slate-300 focus:ring-brand-500 focus:border-brand-500 min-h-[60px]",placeholder:"Describe observations...",value:a.actualResult||"",onChange:b=>H(a.id,{actualResult:b.target.value})})]}),(0,d.jsxs)("div",{children:[(0,d.jsxs)("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wide mb-2 block flex justify-between print:hidden",children:[(0,d.jsx)("span",{children:"Evidence"}),!F&&(0,d.jsx)("span",{className:"font-normal text-[10px] normal-case text-slate-400",children:"Ctrl+V to paste"})]}),a.attachments&&a.attachments.length>0&&(0,d.jsx)("div",{className:"flex flex-wrap gap-2 mb-2",children:a.attachments.map((b,c)=>(0,d.jsxs)("div",{className:"relative w-16 h-16 rounded border border-slate-200 overflow-hidden group",children:[(0,d.jsx)("img",{src:b,alt:"Evidence",className:"w-full h-full object-cover cursor-pointer",onClick:()=>w(b)}),!F&&(0,d.jsx)("button",{onClick:b=>{b.stopPropagation(),((a,b)=>{if(F)return;let c=g.steps.find(b=>b.id===a);if(!c||!c.attachments)return;let d=[...c.attachments];d.splice(b,1),H(a,{attachments:d})})(a.id,c)},className:"absolute top-0 right-0 bg-red-500 text-white p-0.5 opacity-0 group-hover:opacity-100 transition-opacity",children:(0,d.jsx)(B.A,{size:12})})]},c))}),!F&&(0,d.jsxs)("div",{className:"border-2 border-dashed border-slate-200 rounded-lg p-3 flex flex-col items-center justify-center text-center cursor-pointer hover:bg-slate-50 hover:border-slate-300 transition-colors print:hidden",onClick:()=>{},children:[(0,d.jsx)(R.A,{size:16,className:"text-slate-400 mb-1"}),(0,d.jsx)("span",{className:"text-xs text-slate-500",children:"Paste image or click to upload"})]})]})]})]}),!F&&(0,d.jsx)("div",{className:"flex justify-end pt-2 border-t border-slate-50 print:hidden",children:(0,d.jsxs)("div",{className:"flex gap-2",children:[(0,d.jsxs)("button",{onClick:b=>{b.stopPropagation(),H(a.id,{isPassed:!1})},className:`px-4 py-2 rounded-lg text-xs font-bold border transition-colors flex items-center gap-2 ${!1===a.isPassed?"bg-rose-600 text-white border-rose-600":"bg-white text-rose-600 border-rose-200 hover:bg-rose-50"}`,children:[(0,d.jsx)(u.A,{size:14})," FAIL"]}),(0,d.jsxs)("button",{onClick:b=>{b.stopPropagation(),H(a.id,{isPassed:!0})},className:`px-4 py-2 rounded-lg text-xs font-bold border transition-colors flex items-center gap-2 ${!0===a.isPassed?"bg-emerald-600 text-white border-emerald-600":"bg-white text-emerald-600 border-emerald-200 hover:bg-emerald-50"}`,children:[(0,d.jsx)(m.A,{size:14})," PASS"]})]})}),a.comments.length>0&&(0,d.jsx)("div",{className:"bg-slate-50 rounded-lg p-3 space-y-2 mt-2 print:bg-white print:border print:border-slate-200",children:a.comments.map(a=>(0,d.jsxs)("div",{className:"flex gap-2 text-xs",children:[(0,d.jsx)("span",{className:"font-bold text-slate-800",children:a.userId}),(0,d.jsx)("span",{className:"text-slate-600",children:a.text}),(0,d.jsx)("span",{className:"text-slate-400 ml-auto",children:a.createdAt})]},a.id))}),!F&&(0,d.jsxs)("div",{className:"flex gap-2 mt-2 print:hidden",children:[(0,d.jsx)("input",{type:"text",className:"flex-1 text-xs border-slate-200 rounded px-3 py-2 focus:ring-brand-500 focus:border-brand-500",placeholder:"Add a comment...",value:s[a.id]||"",onChange:b=>t({...s,[a.id]:b.target.value}),onKeyDown:b=>"Enter"===b.key&&Z(a.id)}),(0,d.jsx)("button",{onClick:()=>Z(a.id),className:"text-slate-400 hover:text-brand-600 p-2",children:(0,d.jsx)(W.A,{size:14})})]})]})})]},a.id)})})]}),(0,d.jsx)("div",{className:"bg-slate-50 rounded-xl border border-slate-200 p-6 flex flex-col items-center justify-center text-center print:border-0 print:bg-white",children:F?(0,d.jsxs)("div",{className:"w-full flex flex-col items-center",children:[(0,d.jsx)("div",{className:"w-12 h-12 bg-emerald-100 text-emerald-700 rounded-full flex items-center justify-center mb-3 print:hidden",children:(0,d.jsx)(X.A,{size:24})}),(0,d.jsx)("h3",{className:"font-bold text-lg text-emerald-800",children:"Testing Completed & Signed"}),(0,d.jsxs)("p",{className:"text-sm text-slate-500 mt-1 mb-4",children:["Signed by ",g.signedOff?.signedBy," on ",g.signedOff?.signedAt]}),g.signedOff?.signatureData&&(0,d.jsx)("div",{className:"border border-slate-200 rounded bg-white p-2",children:(0,d.jsx)("img",{src:g.signedOff.signatureData,alt:"Signature",className:"h-24 opacity-80"})}),(0,d.jsxs)("button",{onClick:()=>{window.print()},className:"mt-6 flex items-center gap-2 px-5 py-2.5 bg-slate-900 text-white rounded-lg hover:bg-slate-800 shadow-sm transition-colors print:hidden",children:[(0,d.jsx)(Y.A,{size:16})," Download PDF Report"]})]}):(0,d.jsxs)("div",{className:"w-full max-w-md print:hidden",children:[(0,d.jsx)("h3",{className:"font-semibold text-slate-900 mb-4",children:"Sign-off & Complete"}),(0,d.jsxs)("div",{className:"mb-4 text-left",children:[(0,d.jsx)("label",{className:"text-xs font-medium text-slate-700 mb-1 block",children:"Draw Signature"}),(0,d.jsx)(I,{onEnd:y})]}),(0,d.jsxs)("div",{className:"flex items-start gap-2 mb-6 text-left bg-blue-50 p-3 rounded-lg border border-blue-100",children:[(0,d.jsx)("input",{type:"checkbox",id:"ack",checked:z,onChange:a=>A(a.target.checked),className:"mt-0.5 rounded text-brand-600 focus:ring-brand-500 border-gray-300"}),(0,d.jsx)("label",{htmlFor:"ack",className:"text-xs text-blue-900 leading-tight cursor-pointer select-none",children:"I acknowledge that by signing this task, I confirm all steps are executed correctly. This task will be locked and cannot be edited further."})]}),(0,d.jsxs)("button",{onClick:()=>{if(!x||!z)return;let a={...g,status:i.nW.PASSED,signedOff:{signedBy:b.name,signedAt:new Date().toLocaleString(),signatureData:x}};h(a),e(a),_(a.status)},disabled:g.steps.some(a=>null===a.isPassed)||!x||!z,className:`w-full py-3 rounded-lg font-medium flex items-center justify-center gap-2 transition-colors ${g.steps.some(a=>null===a.isPassed)||!x||!z?"bg-slate-200 text-slate-400 cursor-not-allowed":"bg-slate-900 text-white hover:bg-slate-800 shadow-md"}`,children:[(0,d.jsx)(S.A,{size:16})," Sign & Complete Task"]}),g.steps.some(a=>null===a.isPassed)&&(0,d.jsx)("p",{className:"text-xs text-rose-500 mt-2",children:"Please complete all test steps before signing."})]})})]}),o&&(0,d.jsx)("div",{className:"fixed inset-0 bg-slate-900/50 flex items-center justify-center z-50 print:hidden",children:(0,d.jsxs)("div",{className:"bg-white rounded-xl shadow-2xl p-6 w-full max-w-md animate-in zoom-in-95",children:[(0,d.jsxs)("div",{className:"flex items-center gap-3 mb-4 text-slate-900",children:[(0,d.jsx)("div",{className:"w-10 h-10 bg-slate-100 rounded-full flex items-center justify-center",children:(0,d.jsx)(K.A,{size:20,className:"text-slate-800"})}),(0,d.jsxs)("div",{children:[(0,d.jsx)("h3",{className:"font-bold text-lg",children:"Deploy to Production"}),(0,d.jsx)("p",{className:"text-xs text-slate-500",children:"Mark this feature as live"})]})]}),(0,d.jsxs)("div",{className:"space-y-4 mb-6",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Release Version"}),(0,d.jsx)("input",{type:"text",className:"w-full rounded-md border-slate-300 focus:ring-slate-500 focus:border-slate-500",placeholder:"e.g. v2.4.0",value:q,onChange:a=>r(a.target.value)})]}),(0,d.jsx)("div",{className:"bg-yellow-50 p-3 rounded-lg border border-yellow-100",children:(0,d.jsxs)("p",{className:"text-xs text-yellow-800 flex items-start gap-2",children:[(0,d.jsx)(l.A,{size:14,className:"mt-0.5 flex-shrink-0"}),"This will notify all stakeholders that testing is complete and the feature is live."]})})]}),(0,d.jsxs)("div",{className:"flex justify-end gap-3",children:[(0,d.jsx)("button",{onClick:()=>p(!1),className:"px-4 py-2 text-slate-600 hover:bg-slate-50 rounded-lg text-sm font-medium",children:"Cancel"}),(0,d.jsx)("button",{onClick:()=>{let a={...g,status:i.nW.DEPLOYED,deployment:{isDeployed:!0,deployedAt:new Date().toLocaleDateString(),deployedBy:b.name,releaseVersion:q||"v1.0.0"}};h(a),e(a),_(a.status),p(!1)},className:"px-4 py-2 bg-slate-900 text-white hover:bg-slate-800 rounded-lg text-sm font-medium",children:"Confirm Deployment"})]})]})}),v&&(0,d.jsxs)("div",{className:"fixed inset-0 bg-black/90 z-[60] flex items-center justify-center p-4 cursor-zoom-out print:hidden",onClick:()=>w(null),children:[(0,d.jsx)("img",{src:v,alt:"Full View",className:"max-w-full max-h-full rounded-lg shadow-2xl"}),(0,d.jsx)("button",{className:"absolute top-4 right-4 text-white hover:text-slate-300",children:(0,d.jsx)(B.A,{size:32})})]})]})};var $=c(71613);let _=()=>{let[a,b]=(0,f.useState)(1),[c,e]=(0,f.useState)(!1);return(0,d.jsxs)("div",{className:"max-w-3xl mx-auto",children:[(0,d.jsxs)("div",{className:"mb-8",children:[(0,d.jsx)("h1",{className:"text-2xl font-bold text-slate-900",children:"Import Tasks"}),(0,d.jsx)("p",{className:"text-slate-500",children:"Bulk upload UAT scenarios via Excel template."})]}),(0,d.jsxs)("div",{className:"flex items-center justify-between mb-10 relative",children:[(0,d.jsx)("div",{className:"absolute left-0 top-1/2 w-full h-0.5 bg-slate-200 -z-10"}),[1,2,3].map(b=>(0,d.jsx)("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium transition-colors ${a>=b?"bg-slate-900 text-white":"bg-white border-2 border-slate-200 text-slate-400"}`,children:a>b?(0,d.jsx)($.A,{size:14}):b},b))]}),(0,d.jsxs)("div",{className:"bg-white rounded-xl border border-slate-200 shadow-sm overflow-hidden min-h-[400px] flex flex-col",children:[1===a&&(0,d.jsxs)("div",{className:"flex-1 flex flex-col items-center justify-center p-12 text-center animate-fade-in",children:[(0,d.jsxs)("div",{className:`w-full max-w-md h-48 border-2 border-dashed rounded-xl flex flex-col items-center justify-center transition-colors cursor-pointer ${c?"border-blue-500 bg-blue-50":"border-slate-300 hover:border-slate-400"}`,onDragOver:a=>{a.preventDefault(),e(!0)},onDragLeave:()=>e(!1),onDrop:a=>{a.preventDefault(),e(!1),b(2)},onClick:()=>b(2),children:[(0,d.jsx)("div",{className:"w-12 h-12 bg-slate-100 rounded-full flex items-center justify-center text-slate-500 mb-4",children:(0,d.jsx)(w.A,{size:24})}),(0,d.jsx)("p",{className:"text-slate-900 font-medium",children:"Click to upload or drag and drop"}),(0,d.jsx)("p",{className:"text-slate-400 text-sm mt-1",children:"XLSX or CSV (Max 5MB)"})]}),(0,d.jsxs)("div",{className:"mt-8 flex gap-2 text-sm text-blue-600 hover:underline cursor-pointer",children:[(0,d.jsx)(L.A,{size:16})," Download Template"]})]}),2===a&&(0,d.jsxs)("div",{className:"flex-1 p-6 animate-fade-in",children:[(0,d.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,d.jsx)("h3",{className:"font-semibold text-slate-900",children:"Preview & Validate"}),(0,d.jsx)("span",{className:"text-xs px-2 py-1 bg-green-50 text-green-700 rounded border border-green-100",children:"45 Valid Rows"})]}),(0,d.jsx)("div",{className:"overflow-x-auto border border-slate-200 rounded-lg",children:(0,d.jsxs)("table",{className:"w-full text-sm text-left",children:[(0,d.jsx)("thead",{className:"bg-slate-50 text-slate-500 border-b border-slate-200",children:(0,d.jsxs)("tr",{children:[(0,d.jsx)("th",{className:"p-3 font-medium",children:"Title"}),(0,d.jsx)("th",{className:"p-3 font-medium",children:"Module"}),(0,d.jsx)("th",{className:"p-3 font-medium",children:"Priority"}),(0,d.jsx)("th",{className:"p-3 font-medium",children:"Country"})]})}),(0,d.jsxs)("tbody",{className:"divide-y divide-slate-100 text-slate-700",children:[(0,d.jsxs)("tr",{children:[(0,d.jsx)("td",{className:"p-3",children:"Verify Login Flow"}),(0,d.jsx)("td",{className:"p-3",children:"Auth"}),(0,d.jsx)("td",{className:"p-3",children:"High"}),(0,d.jsx)("td",{className:"p-3",children:"SG"})]}),(0,d.jsxs)("tr",{children:[(0,d.jsx)("td",{className:"p-3",children:"Checkout as Guest"}),(0,d.jsx)("td",{className:"p-3",children:"Ordering"}),(0,d.jsx)("td",{className:"p-3",children:"Medium"}),(0,d.jsx)("td",{className:"p-3",children:"SG"})]}),(0,d.jsxs)("tr",{children:[(0,d.jsx)("td",{className:"p-3",children:"Download PDF"}),(0,d.jsx)("td",{className:"p-3",children:"Report"}),(0,d.jsx)("td",{className:"p-3",children:"Low"}),(0,d.jsx)("td",{className:"p-3",children:"SG"})]}),(0,d.jsxs)("tr",{className:"bg-red-50/50",children:[(0,d.jsxs)("td",{className:"p-3 flex items-center gap-2",children:[(0,d.jsx)(l.A,{size:14,className:"text-red-500"})," Invalid Date Format"]}),(0,d.jsx)("td",{className:"p-3",children:"Admin"}),(0,d.jsx)("td",{className:"p-3",children:"-"}),(0,d.jsx)("td",{className:"p-3",children:"SG"})]})]})]})})]}),3===a&&(0,d.jsxs)("div",{className:"flex-1 flex flex-col items-center justify-center p-12 text-center animate-fade-in",children:[(0,d.jsx)("div",{className:"w-16 h-16 bg-green-100 text-green-600 rounded-full flex items-center justify-center mb-6",children:(0,d.jsx)($.A,{size:32})}),(0,d.jsx)("h2",{className:"text-xl font-bold text-slate-900",children:"Import Successful!"}),(0,d.jsx)("p",{className:"text-slate-500 mt-2 max-w-sm",children:"45 tasks have been created and assigned to stakeholders in Singapore."})]}),(0,d.jsxs)("div",{className:"p-4 border-t border-slate-200 bg-slate-50 flex justify-end gap-3",children:[a>1&&a<3&&(0,d.jsx)("button",{onClick:()=>b(a-1),className:"px-4 py-2 text-slate-600 hover:text-slate-900 font-medium text-sm",children:"Cancel"}),a<3&&(0,d.jsxs)("button",{onClick:()=>b(a+1),className:"px-6 py-2 bg-slate-900 text-white rounded-lg hover:bg-slate-800 transition-colors font-medium text-sm flex items-center gap-2",children:[2===a?"Confirm Import":"Next"," ",(0,d.jsx)(p.A,{size:16})]})]})]})]})},aa=({initialView:a,initialSelectedTaskId:b=null,onRouteChange:c})=>{let k=(0,e.useRouter)(),{data:l,status:m}=(0,g.useSession)(),[n,o]=(0,f.useState)(null),[p,q]=(0,f.useState)([]),[s,t]=(0,f.useState)(a??"LOGIN"),[u,w]=(0,f.useState)(b),[x,y]=(0,f.useState)(j._z),[z,A]=(0,f.useState)(j.xW),[B,C]=(0,f.useState)(""),[D,F]=(0,f.useState)(""),[H,I]=(0,f.useState)(null);(0,f.useEffect)(()=>{if("loading"===m)return;if(!l?.user){o(null),t("LOGIN");return}let b="ADMIN"===l.user.role?i.Xh.ADMIN:i.Xh.STAKEHOLDER;o({id:l.user.id,name:l.user.name||l.user.email||"User",email:l.user.email||"",role:b,countryCode:l.user.countryCode||"SG",avatarUrl:l.user.image||void 0}),t(a??(b===i.Xh.ADMIN?"DASHBOARD_ADMIN":"DASHBOARD_STAKEHOLDER"))},[l,m,a]),(0,f.useEffect)(()=>{if(!l?.user)return void q([]);(async()=>{let a=await fetch("/api/tasks",{cache:"no-store"});if(!a.ok)return q([]);q(await a.json())})()},[l?.user?.id]),(0,f.useEffect)(()=>{!l?.user||!u||p.find(a=>a.id===u)||(async()=>{let a=await fetch(`/api/tasks/${u}`,{cache:"no-store"});if(!a.ok)return;let b=await a.json();q(a=>a.some(a=>a.id===b.id)?a:[b,...a])})()},[u,l?.user,p]);let J=async a=>{if(a.preventDefault(),!B||!D)return;I(null);let b=await (0,g.signIn)("credentials",{email:B,password:D,redirect:!1});if(!b||b.error)return void I("Invalid email or password. Please try again.");let c=await (0,g.getSession)();if("ADMIN"===c?.user?.role)return void k.push("/admin/dashboard");k.push("/")},K=a=>{w(a.id),t("TASK_DETAIL"),c?.("TASK_DETAIL",a.id)},L=a=>{t(a),"TASK_DETAIL"!==a&&w(null),c?.(a,"TASK_DETAIL"===a?u:null)},M=u?p.find(a=>a.id===u):null;return n&&"LOGIN"!==s?(0,d.jsxs)(h.P,{currentUser:n,onLogout:()=>{(0,g.signOut)({redirect:!1}),o(null),t("LOGIN"),w(null),C(""),F(""),c?.("LOGIN")},currentView:s,onNavigate:L,children:["DASHBOARD_STAKEHOLDER"===s&&(0,d.jsx)(r,{tasks:p,onSelectTask:K,currentUserCountry:n.countryCode}),"DASHBOARD_ADMIN"===s&&(0,d.jsx)(v,{tasks:p,onSelectTask:K,onManageTasks:()=>L("ADMIN_TASK_MANAGEMENT")}),"ADMIN_TASK_MANAGEMENT"===s&&(0,d.jsx)(E,{tasks:p,onImport:()=>L("IMPORT_WIZARD"),onEdit:K,onAddTask:a=>{q(b=>[...a,...b])},availableCountries:x,availableModules:z}),"ADMIN_DATABASE"===s&&(0,d.jsx)(G,{countries:x,modules:z,onUpdateCountries:y,onUpdateModules:A}),"TASK_DETAIL"===s&&u&&M&&(0,d.jsx)(Z,{task:M,currentUser:n,onBack:()=>L(n.role===i.Xh.ADMIN?"DASHBOARD_ADMIN":"DASHBOARD_STAKEHOLDER"),onUpdateTask:a=>{q(b=>b.some(b=>b.id===a.id)?b.map(b=>b.id===a.id?a:b):[a,...b])}}),"IMPORT_WIZARD"===s&&(0,d.jsx)(_,{})]}):(0,d.jsxs)("div",{className:"min-h-screen bg-slate-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8",children:[(0,d.jsxs)("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:[(0,d.jsx)("div",{className:"flex justify-center mb-6",children:(0,d.jsx)("div",{className:"w-16 h-16 bg-brand-500 rounded-xl flex items-center justify-center shadow-lg",children:(0,d.jsx)("span",{className:"text-white font-bold text-2xl tracking-wider",children:"CTT"})})}),(0,d.jsx)("h2",{className:"text-center text-3xl font-extrabold text-slate-900 tracking-tight",children:"CTT"}),(0,d.jsx)("p",{className:"mt-2 text-center text-sm text-slate-500 font-medium",children:"Cuba Try Test - UAT Management"})]}),(0,d.jsxs)("div",{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md",children:[(0,d.jsxs)("div",{className:"bg-white py-10 px-6 shadow-xl border border-slate-100 sm:rounded-2xl",children:[(0,d.jsxs)("form",{className:"space-y-6",onSubmit:J,children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-slate-700",children:"Email address"}),(0,d.jsx)("input",{type:"text",className:"mt-1 appearance-none block w-full px-3 py-2 border border-slate-300 rounded-lg shadow-sm placeholder-slate-400 focus:outline-none focus:ring-brand-500 focus:border-brand-500 sm:text-sm",placeholder:"user@dksh.com",value:B,onChange:a=>C(a.target.value)})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-slate-700",children:"Password"}),(0,d.jsx)("input",{type:"password",className:"mt-1 appearance-none block w-full px-3 py-2 border border-slate-300 rounded-lg shadow-sm placeholder-slate-400 focus:outline-none focus:ring-brand-500 focus:border-brand-500 sm:text-sm",placeholder:"••••••••",value:D,onChange:a=>F(a.target.value)})]}),H&&(0,d.jsx)("div",{className:"text-sm text-rose-600 bg-rose-50 border border-rose-100 rounded-lg px-3 py-2",children:H}),(0,d.jsx)("div",{children:(0,d.jsx)("button",{type:"submit",className:"w-full flex justify-center py-3 px-4 border border-transparent rounded-xl shadow-sm text-sm font-semibold text-white bg-slate-900 hover:bg-slate-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-slate-900 transition-all",children:"Sign in"})})]}),(0,d.jsx)("div",{className:"mt-6",children:(0,d.jsxs)("div",{className:"relative",children:[(0,d.jsx)("div",{className:"absolute inset-0 flex items-center",children:(0,d.jsx)("div",{className:"w-full border-t border-slate-200"})}),(0,d.jsx)("div",{className:"relative flex justify-center text-sm",children:(0,d.jsx)("span",{className:"px-2 bg-white text-slate-500",children:"Tip: Use your assigned account to sign in"})})]})})]}),(0,d.jsx)("p",{className:"text-center text-xs text-slate-400 mt-6",children:"\xa9 2023 Corporate IT Team"})]})]})};function ab({initialView:a,initialTaskId:b=null}){let c=(0,e.useRouter)();return(0,d.jsx)(aa,{initialView:a,initialSelectedTaskId:b,onRouteChange:(a,b)=>{switch(a){case"LOGIN":case"DASHBOARD_STAKEHOLDER":c.push("/");return;case"DASHBOARD_ADMIN":c.push("/admin/dashboard");return;case"ADMIN_TASK_MANAGEMENT":c.push("/admin/tasks");return;case"ADMIN_DATABASE":c.push("/admin/database");return;case"IMPORT_WIZARD":c.push("/import");return;case"TASK_DETAIL":if(b)return void c.push(`/tasks/${b}`);c.push("/");return;default:return c.push("/"),a}}})}},57046:(a,b,c)=>{Promise.resolve().then(c.t.bind(c,81170,23)),Promise.resolve().then(c.t.bind(c,23597,23)),Promise.resolve().then(c.t.bind(c,36893,23)),Promise.resolve().then(c.t.bind(c,89748,23)),Promise.resolve().then(c.t.bind(c,6060,23)),Promise.resolve().then(c.t.bind(c,7184,23)),Promise.resolve().then(c.t.bind(c,69576,23)),Promise.resolve().then(c.t.bind(c,73041,23)),Promise.resolve().then(c.t.bind(c,51384,23))},57864:(a,b,c)=>{"use strict";c.d(b,{P:()=>r});var d=c(21124),e=c(38301),f=c(18334),g=c(41998),h=c(82548),i=c(55705),j=c(80696),k=c(65828),l=c(47268),m=c(18310),n=c(71613),o=c(44688),p=c(71117),q=c(19710);let r=({children:a,currentUser:b,onLogout:c,onNavigate:r,currentView:t})=>{let u=b.role===f.Xh.ADMIN,[v,w]=(0,e.useState)(!1),x=(0,e.useRef)(null),y=g.uY.filter(a=>a.userId===b.id),z=y.filter(a=>!a.isRead).length;return(0,e.useEffect)(()=>{let a=a=>{x.current&&!x.current.contains(a.target)&&w(!1)};return document.addEventListener("mousedown",a),()=>document.removeEventListener("mousedown",a)},[]),(0,d.jsxs)("div",{className:"min-h-screen bg-slate-50 text-slate-900 font-sans flex flex-col",children:[(0,d.jsx)("header",{className:"sticky top-0 z-50 bg-white/95 backdrop-blur-md border-b border-slate-200 shadow-sm print:hidden",children:(0,d.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,d.jsxs)("div",{className:"flex justify-between items-center h-16",children:[(0,d.jsxs)("div",{className:"flex items-center gap-8",children:[(0,d.jsxs)("div",{className:"flex items-center gap-2 cursor-pointer group",onClick:()=>r(u?"DASHBOARD_ADMIN":"DASHBOARD_STAKEHOLDER"),children:[(0,d.jsx)("div",{className:"w-9 h-9 bg-brand-500 rounded flex items-center justify-center shadow-sm group-hover:bg-brand-600 transition-colors",children:(0,d.jsx)("span",{className:"text-white font-bold text-sm tracking-wider",children:"CTT"})}),(0,d.jsxs)("div",{className:"hidden md:block",children:[(0,d.jsx)("span",{className:"font-bold text-lg tracking-tight text-slate-900 block leading-tight",children:"CTT"}),(0,d.jsx)("span",{className:"text-[10px] uppercase font-semibold text-slate-400 tracking-wider block leading-none",children:"Cuba Try Test"})]})]}),(0,d.jsx)("nav",{className:"hidden md:flex gap-1 ml-4 items-center",children:u?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(s,{active:"DASHBOARD_ADMIN"===t,icon:(0,d.jsx)(h.A,{size:16}),label:"Dashboard",onClick:()=>r("DASHBOARD_ADMIN")}),(0,d.jsx)(s,{active:"ADMIN_TASK_MANAGEMENT"===t,icon:(0,d.jsx)(i.A,{size:16}),label:"Manage Tasks",onClick:()=>r("ADMIN_TASK_MANAGEMENT")}),(0,d.jsx)(s,{active:"IMPORT_WIZARD"===t,icon:(0,d.jsx)(j.A,{size:16}),label:"Import",onClick:()=>r("IMPORT_WIZARD")}),(0,d.jsx)(s,{active:"ADMIN_DATABASE"===t,icon:(0,d.jsx)(k.A,{size:16}),label:"Database",onClick:()=>r("ADMIN_DATABASE")})]}):null})]}),(0,d.jsxs)("div",{className:"flex items-center gap-4",children:[(0,d.jsxs)("div",{className:"relative",ref:x,children:[(0,d.jsxs)("button",{onClick:()=>w(!v),className:`p-2 rounded-full transition-colors relative ${v?"bg-brand-50 text-brand-600":"text-slate-400 hover:text-brand-500 hover:bg-brand-50"}`,children:[(0,d.jsx)(l.A,{size:20}),z>0&&(0,d.jsx)("span",{className:"absolute top-1 right-1 w-2.5 h-2.5 bg-brand-500 rounded-full border-2 border-white"})]}),v&&(0,d.jsxs)("div",{className:"absolute right-0 mt-3 w-80 sm:w-96 bg-white rounded-xl shadow-xl border border-slate-100 ring-1 ring-black ring-opacity-5 animate-in fade-in slide-in-from-top-2 origin-top-right overflow-hidden",children:[(0,d.jsxs)("div",{className:"px-4 py-3 border-b border-slate-100 bg-slate-50/50 flex justify-between items-center",children:[(0,d.jsx)("h3",{className:"text-sm font-semibold text-slate-900",children:"Notifications"}),(0,d.jsx)("button",{className:"text-xs text-brand-600 hover:text-brand-700 font-medium",children:"Mark all read"})]}),(0,d.jsx)("div",{className:"max-h-[400px] overflow-y-auto",children:0===y.length?(0,d.jsx)("div",{className:"p-8 text-center text-slate-400",children:(0,d.jsx)("p",{className:"text-sm",children:"No new notifications"})}):(0,d.jsx)("div",{className:"divide-y divide-slate-50",children:y.map(a=>(0,d.jsxs)("div",{className:`p-4 hover:bg-slate-50 transition-colors flex gap-3 ${!a.isRead?"bg-brand-50/10":""}`,children:[(0,d.jsxs)("div",{className:`mt-1 flex-shrink-0 w-8 h-8 rounded-full flex items-center justify-center ${"ALERT"===a.type?"bg-rose-100 text-rose-600":"SUCCESS"===a.type?"bg-emerald-100 text-emerald-600":"MENTION"===a.type?"bg-blue-100 text-blue-600":"bg-slate-100 text-slate-500"}`,children:["ALERT"===a.type&&(0,d.jsx)(m.A,{size:14}),"SUCCESS"===a.type&&(0,d.jsx)(n.A,{size:14}),"MENTION"===a.type&&(0,d.jsx)(o.A,{size:14}),"INFO"===a.type&&(0,d.jsx)(p.A,{size:14})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("p",{className:"text-sm text-slate-800 leading-snug",children:a.message}),(0,d.jsx)("p",{className:"text-xs text-slate-400 mt-1",children:a.time})]}),!a.isRead&&(0,d.jsx)("div",{className:"mt-2 w-2 h-2 rounded-full bg-brand-500 flex-shrink-0"})]},a.id))})}),(0,d.jsx)("div",{className:"p-2 border-t border-slate-100 text-center",children:(0,d.jsx)("button",{className:"text-xs text-slate-500 hover:text-slate-800 font-medium py-1",children:"View All History"})})]})]}),(0,d.jsx)("div",{className:"h-6 w-px bg-slate-200 mx-1"}),(0,d.jsxs)("div",{className:"flex items-center gap-3",children:[(0,d.jsxs)("div",{className:"text-right hidden sm:block",children:[(0,d.jsx)("p",{className:"text-sm font-medium text-slate-900",children:b.name}),(0,d.jsxs)("p",{className:"text-xs text-slate-500",children:[b.countryCode," • ",b.role]})]}),(0,d.jsx)("img",{src:b.avatarUrl,alt:"User",className:"w-9 h-9 rounded-full border border-slate-200 shadow-sm object-cover"}),(0,d.jsx)("button",{onClick:c,className:"text-slate-400 hover:text-slate-800 ml-2",children:(0,d.jsx)(q.A,{size:18})})]})]})]})})}),(0,d.jsx)("main",{className:"flex-1 max-w-7xl mx-auto w-full px-4 sm:px-6 lg:px-8 py-8",children:a})]})},s=({active:a,icon:b,label:c,onClick:e})=>(0,d.jsxs)("button",{onClick:e,className:`flex items-center gap-2 px-3 py-2 rounded-md text-sm font-medium transition-all ${a?"bg-slate-100 text-brand-600":"text-slate-500 hover:text-slate-800 hover:bg-slate-50"}`,children:[b,c]})},62829:(a,b,c)=>{"use strict";c.d(b,{default:()=>d});let d=(0,c(97954).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/putra/Desktop/CTT-DKSH-main/app/AppRouteShell.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/putra/Desktop/CTT-DKSH-main/app/AppRouteShell.tsx","default")},76494:(a,b,c)=>{Promise.resolve().then(c.bind(c,81765))},81765:(a,b,c)=>{"use strict";c.d(b,{default:()=>d});let d=(0,c(97954).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/putra/Desktop/CTT-DKSH-main/app/Providers.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/putra/Desktop/CTT-DKSH-main/app/Providers.tsx","default")},82704:()=>{},97923:(a,b,c)=>{"use strict";c.d(b,{default:()=>f});var d=c(21124),e=c(57461);function f({children:a}){return(0,d.jsx)(e.SessionProvider,{children:a})}}};